(function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)a=s[u],r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},a={app:0},r={app:0},i=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-1b9d707c":"26daeee1","chunk-22bd7c7e":"70ee2249","chunk-3c365ea6":"c71b7cdd","chunk-445b4931":"e0f44c88","chunk-676e8f9a":"72554912","chunk-7cb249a9":"19ff20ac"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-1b9d707c":1,"chunk-22bd7c7e":1,"chunk-3c365ea6":1,"chunk-445b4931":1,"chunk-676e8f9a":1,"chunk-7cb249a9":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-1b9d707c":"b8a02323","chunk-22bd7c7e":"207fb0f9","chunk-3c365ea6":"16d17fc7","chunk-445b4931":"75a58ff6","chunk-676e8f9a":"d7f66413","chunk-7cb249a9":"8da95a5f"}[e]+".css",r=l.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===o||u===r))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===o||u===r)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){a[e]=0}));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise(function(t,n){o=r[e]=[t,n]});t.push(o[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e),c=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+o+": "+a+")");i.type=o,i.request=a,n[1](i)}r[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"017c":function(e,t,n){var o={"./category.js":"ec85","./global.js":"1a43","./index.js":"7af2","./login.js":"c668","./notification.js":"fe80","./question.js":"7972","./reply.js":"b001","./toolbar.js":"fcf7"};function a(e){var t=r(e);return n(t)}function r(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="017c"},1:function(e,t){},"1a43":function(e,t,n){"use strict";n.r(t),t["default"]={state:{},getters:{},mutations:{},actions:{}}},"20c9":function(e,t,n){},"22d6":function(e,t,n){"use strict";class o{storeToken(e){return localStorage.setItem("token",e)}store(e){this.storeToken(e)}clear(){localStorage.removeItem("token")}getToken(){return localStorage.getItem("token")}}o=new o},"52d9":function(e,t,n){"use strict";var o=n("aab9"),a=n.n(o);a.a},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),a=n("f309"),r=n("2992"),i=n.n(r);o["default"].use(a["a"]);var s=new a["a"]({icons:{theme:{dark:!0,themes:{light:{primary:"#42a5f5"},dark:{primary:"#2196F3"}}},options:{customProperties:!0},iconfont:"mdi"},lang:{locales:{ru:i.a},current:"ru"}}),l=(n("ac6a"),n("1da1")),c=n("8c4f"),u=n("eb02");o["default"].use(c["a"]);const d=[{name:"main",meta:{title:"Main Page - Forum App",metaTags:[{name:"description of main page",content:"The main page of our example app."},{property:"og:description",content:"The content sections of main page of our forum app."}]},path:"/",component:()=>n.e("chunk-676e8f9a").then(n.bind(null,"405f"))},{name:"forum",meta:{title:"Forum"},path:"/forum",component:()=>n.e("chunk-22bd7c7e").then(n.bind(null,"d10c"))},{name:"CategoryQuestions",meta:{title:":slug - Forum Category"},path:"/category/:slug",component:()=>n.e("chunk-22bd7c7e").then(n.bind(null,"d10c"))},{name:"ask",meta:{title:"Create question"},path:"/ask",component:()=>n.e("chunk-3c365ea6").then(n.bind(null,"4a37"))},{name:"signup",meta:{title:"Signup"},path:"/signup",component:()=>Promise.resolve().then(n.bind(null,"fccd"))},{name:"edit-categories",meta:{title:"Edit categories"},path:"/edit-categories",component:()=>n.e("chunk-7cb249a9").then(n.bind(null,"b761"))},{name:"login",meta:{title:"Login"},path:"/login",component:()=>Promise.resolve().then(n.bind(null,"b461"))},{name:"read",meta:{title:"Article"},path:"/question/:slug",component:()=>n.e("chunk-445b4931").then(n.bind(null,"3a83"))},{path:"*",meta:{title:"Page not found!"},component:()=>n.e("chunk-1b9d707c").then(n.bind(null,"be4d"))}],p=new c["a"]({routes:d,hashbang:!1,mode:"history"});p.beforeEach(function(){var e=Object(l["a"])(function*(e,t,n){(yield u["a"]._actions["login/checkPermitionsOnCurrentPath"][0](e.path))?(console.warn("ROUTER: есть права"),n()):(console.warn("ROUTER: нет прав"),n({name:"forum"}))});return function(t,n,o){return e.apply(this,arguments)}}()),p.beforeEach((e,t,n)=>{const o=e.matched.slice().reverse().find(e=>e.meta&&e.meta.title),a=e.matched.slice().reverse().find(e=>e.meta&&e.meta.metaTags);t.matched.slice().reverse().find(e=>e.meta&&e.meta.metaTags);if(o&&(document.title=o.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map(e=>e.parentNode.removeChild(e)),!a)return n();a.meta.metaTags.map(e=>{const t=document.createElement("meta");return Object.keys(e).forEach(n=>{t.setAttribute(n,e[n])}),t.setAttribute("data-vue-router-controlled",""),t}).forEach(e=>document.head.appendChild(e)),n()});var f=p,m=n("9483");Object(m["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var g=n("ce5b"),h=n.n(g),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app"},[n("toolbar"),n("keep-alive",{attrs:{max:"1"}},[n("router-view",{key:e.$route.fullPath})],1),n("snack"),n("foot-app")],1)},v=[],_=n("be94"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{color:"indigo",dark:"","z-index":"2","data-app":""}},[n("div",{staticClass:"hidden-md-and-up"},[n("v-menu",{attrs:{bottom:"",left:"","z-index":"223"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({attrs:{dark:"",icon:""}},o),[n("v-app-bar-nav-icon")],1)]}}])},[n("v-list",e._l(e.items,function(t,o){return n("v-list-item",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],key:o,attrs:{to:t.to},on:{click:function(n){return e.manuClickHandler(t.title)}}},[n("v-list-item-title",[n("v-btn",{attrs:{text:""}},[n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v(e._s(t.icon))])],1),e._v("\n                          "+e._s(t.title)+"\n                      ")],1)],1)],1)}),1)],1)],1),n("v-toolbar-title",{staticClass:"white--text"},[n("v-icon",[e._v("nature_people")]),e._v(" Форум\n  ")],1),n("v-spacer"),e.loggedIn?n("app-notification"):e._e(),n("div",{staticClass:"hidden-sm-and-down"},e._l(e.items,function(t){return n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],key:t.title,attrs:{ripple:!1,text:"",to:t.to},on:{click:function(n){return e.manuClickHandler(t.title)}}},[n("v-icon",[e._v(e._s(t.icon))]),e._v("\n          "+e._s(t.title)+"\n      ")],1)}),1),n("div",{staticClass:"text-xs-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[n("v-icon",[e._v(e._s(e.regMode?"assignment":"person"))]),e._v("\n        "+e._s(e.regMode?"Форма регистрации":"Форма входа")+"\n      ")],1),e.modal?n("v-card-text",[e.regMode?n("SignupVue",{on:{toLoginMode:function(t){e.regMode=!1}}}):n("LoginVue",{on:{toRegMode:function(t){e.regMode=!0}}})],1):e._e()],1)],1)],1)],1)},k=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{clsas:"text-xs-center"}},[n("v-menu",{attrs:{"offset-y":""}},[e.noNews?n("v-alert",{staticClass:"ma-0 pa-0",attrs:{value:!0,type:"primary"}},[e._v("\n                Нету новостей\n            ")]):e._e(),n("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[n("v-icon",{attrs:{color:e.unreadCount?"red":"red lighten-4"}},[e._v("add_alert")]),e._v("\n            "+e._s(e.unreadCount)+"\n        ")],1),n("v-list",{class:e.noAlerts?"ma-0 pa-0":"pb-0"},[e._l(e.unread,function(t){return n("v-list-item",{key:t.id},[n("router-link",{attrs:{to:t.path}},[n("v-list-item-title",{on:{click:function(n){return e.markAsRead(t)}}},[e._v(e._s(t.question))])],1)],1)}),e.unreadCount?n("v-divider"):e._e(),e._l(e.read,function(t){return n("v-list-item",{key:t.id},[n("router-link",{attrs:{to:t.path}},[n("v-list-item-title",[e._v(e._s(t.question))])],1)],1)}),e.noAlerts?n("v-alert",{staticClass:"ma-0 pa-0",attrs:{value:!0,type:"primary"}},[e._v("\n                Нету оповещений\n            ")]):e._e()],2)],1)],1)},w=[],y=n("2f62"),T={name:"notifics",data(){return{inited:!1,sound:"https://www.soundsnap.com/streamers/play.php?id=1554465771.2719:f58b2a1ec50f5a5b79ed74d836d2eaf5a2bb11bf:f25ca3cbbbabc600c18619f588ee0dcca822172413031b9a056fd1630e73ba2c2679ee348c5b56583ca59d4991f14127b8864d3e2470b3f99886768a7d15eec51084495434374d0349db5c4692805249960df3d70666eaeaa184aafadbd04757a4817a0bbe20252aad7a46d82f7af97614d23353e3632e798535b8ccf6e381d8eb2f51bed6cda2c33c7d111a8750e4a031ec38acbd4b8c99a0fb212930aa07b40458547b8fb80d1e020fa595b7fd75bb8f93a0aa1b0a23d595344668f7084bc65d5c3d2941a2afc7e3ed0c18f9bc1cd606a9b8934f8be11fbbf5e42b7c3313d7"}},created(){this.getNotifications(),this.initLiveNotifications()},computed:Object(_["a"])({},Object(y["c"])(["login/loggedIn","login/id","notification/read","notification/unread"]),{loggedIn(){return this["login/loggedIn"]},noAlerts(){return!this.unreadCount&&!this.readCount},noNews(){return!this.unreadCount},read(){return this["notification/read"]},unread(){return this["notification/unread"]},readCount(){const e=this.read;return e&&e instanceof Array&&e.length},unreadCount(){const e=this.unread;return e&&e instanceof Array&&e.length}}),watch:{loggedIn(e,t){alert(""),this.getNotifications(),this.initLiveNotifications()}},methods:Object(_["a"])({},Object(y["b"])(["notification/getNotifications","notification/markAsRead"]),{getNotifications(){var e=this;return Object(l["a"])(function*(){if(e["login/loggedIn"]){let t=yield e["notification/getNotifications"]();t?console.log("GET NOTIF: success"):console.warn("GET NOTIF: failed")}})()},initLiveNotifications(){this["login/loggedIn"]&&!this.inited&&(window.playSound=this.playSound,Echo.private("App.User."+this["login/id"]).notification(e=>{console.log("app notif.vue ->",e,e.type),this.playSound(),this.getNotifications(),this.inited=!0}))},playSound(){let e=new Audio(this.sound);e.play()},markAsRead(e){this["notification/markAsRead"](e)}})},x=T,j=(n("52d9"),n("2877")),N=n("6544"),A=n.n(N),S=n("0798"),C=n("8336"),P=n("ce7e"),L=n("132d"),I=n("8860"),M=n("da13"),D=n("5d23"),F=n("e449"),R=Object(j["a"])(x,E,w,!1,null,null,null),V=R.exports;A()(R,{VAlert:S["a"],VBtn:C["a"],VDivider:P["a"],VIcon:L["a"],VList:I["a"],VListItem:M["a"],VListItemTitle:D["b"],VMenu:F["a"]});var $=n("b461"),q=n("fccd"),K={name:"TOOLbar",components:{AppNotification:V,LoginVue:$["default"],SignupVue:q["default"]},data(){return{regMode:!1}},computed:Object(_["a"])({},Object(y["e"])([]),Object(y["c"])(["login/loggedIn","toolbar/items"]),{modal:{get(){return this.$store.state.toolbar.modalMode},set(e){e?this["toolbar/SET_MODAL_MODE_ON"]():this["toolbar/SET_MODAL_MODE_OFF"]()}},items(){return this["toolbar/items"]},loggedIn(){return this["login/loggedIn"]}}),methods:Object(_["a"])({},Object(y["d"])(["toolbar/SET_MODAL_MODE_ON","toolbar/SET_MODAL_MODE_OFF"]),Object(y["b"])(["login/logout"]),{manuClickHandler(e){"Выйти"==e&&this.logout(),"Войти"==e&&this["toolbar/SET_MODAL_MODE_ON"]()},logout(){console.log("login/logout"),this["login/logout"]()}})},G=K,B=n("5bc1"),H=n("b0af"),U=n("e99f"),z=n("99d9"),Q=n("169a"),J=n("9910"),Y=n("2a7f"),X=Object(j["a"])(G,O,k,!1,null,null,null),W=X.exports;A()(X,{VAppBarNavIcon:B["a"],VBtn:C["a"],VCard:H["a"],VCardText:U["a"],VCardTitle:z["b"],VDialog:Q["a"],VIcon:L["a"],VList:I["a"],VListItem:M["a"],VListItemTitle:D["b"],VMenu:F["a"],VSpacer:J["a"],VToolbar:Y["a"],VToolbarTitle:Y["b"]});var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{bottom:"bottom"===e.y,left:"left"===e.x,"multi-line":"multi-line"===e.mode,right:"right"===e.x,timeout:e.timeout,top:"top"===e.y,vertical:"vertical"===e.mode,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.text)+"\n  "),n("v-btn",{attrs:{color:"pink",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Закрыть\n  ")])],1)},ee=[],te={data(){return{snackbar:!1,y:"top",x:null,mode:"",timeout:6e3,text:"Hello, I'm a snackbar",color:"info"}},mounted(){var e=this;window.snack=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Attention",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";e.text=t,e.color=n,e.snackbar=!0}}},ne=te,oe=n("2db4"),ae=Object(j["a"])(ne,Z,ee,!1,null,null,null),re=ae.exports;A()(ae,{VBtn:C["a"],VSnackbar:oe["a"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{staticClass:"justify-center"},[n("v-card-actions",{staticClass:"justify-center"},[n("v-flex",{attrs:{"lighten-1":"","py-1":"","text-xs-center":"","grey--text":"",xs12:""}},[n("strong",[e._v("ФОРУМ")]),e._v("    ©     "+e._s((new Date).getFullYear())+"\n      ")])],1)],1)},se=[],le={name:"app-footer",data:()=>({})},ce=le,ue=n("0e8f"),de=n("553a"),pe=Object(j["a"])(ce,ie,se,!1,null,null,null),fe=pe.exports;A()(pe,{VCardActions:z["a"],VFlex:ue["a"],VFooter:de["a"]});var me={name:"APP__HOME",components:{toolbar:W,"foot-app":fe,snack:re},computed:Object(_["a"])({},Object(y["c"])(["login/TOKEN__isOK"])),mounted(){window.app=this,this["login/TOKEN__isOK"]||this["login/logout"]()},methods:Object(_["a"])({},Object(y["b"])(["login/logout"]))},ge=me,he=(n("9993"),n("7496")),be=Object(j["a"])(ge,b,v,!1,null,null,null),ve=be.exports;A()(be,{VApp:he["a"]});var _e=n("0493"),Oe=n.n(_e);n("20c9"),n("d5e8"),n("5363");window.router=f,window.store=u["a"],o["default"].use(h.a,{theme:{primary:"#3f51b5",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"}}),n("ba6a"),o["default"].use(Oe.a),window.md=n("0e54"),window.EventBus=new o["default"],o["default"].config.productionTip=!1,o["default"].config.performance=!0,o["default"].config.devtools=!0,new o["default"]({router:f,store:u["a"],vuetify:s,render:e=>e(ve)}).$mount("#app")},7972:function(e,t,n){"use strict";n.r(t);var o=n("8468");n("097d"),n("22d6");t["default"]={state:{questions:[],loading:!1},getters:{questions(e,t){return e.questions},loading(e,t){return e.loading}},mutations:{toggle(e,t){let n=t.prop;e[n]=!e[n]},changeProp(e,t){let n=t.prop,o=t.val;e[n]=o},changeObj(e,t){let n=t.obj,o=t.prop,a=t.val;e[n][o]=a}},actions:{getQuestions(e){e.state;let t=e.commit;e.dispatch;return t("changeProp",{prop:"loading",val:!0}),axios.get("question").then(e=>{return t("changeProp",{prop:"questions",val:e.data.data}),e.data}).catch(e=>{return console.warn("ERR in getQuestions => ",e),!1}).finally(e=>{return t("changeProp",{prop:"loading",val:!1}),e})},getQuestionByCategorySlug(e,t){e.state;let n=e.commit;e.dispatch;return n("changeProp",{prop:"loading",val:!0}),axios.get(`category/${t}/questions`).then(e=>{return n("changeProp",{prop:"questions",val:e.data.data}),e.data}).catch(e=>{return console.warn("ERR in getQuestions => ",e),!1}).finally(e=>{return n("changeProp",{prop:"loading",val:!1}),e})},createQuestion(e,t){return Object(o["a"])(e),axios.post("question",t)},questionUpdate(e,t){return Object(o["a"])(e),axios.patch(`question/${t.slug}`,t)}}}},"7af2":function(e,t,n){"use strict";n.r(t);var o=n("be94"),a=(n("a481"),n("ac6a"),n("bba4")),r=n.n(a);const i=n("017c"),s={};i.keys().forEach(e=>{if("./index.js"===e)return;const t=r()(e.replace(/(\.\/|\.js)/g,""));s[t]=Object(o["a"])({namespaced:!0},i(e).default)}),t["default"]=s},9993:function(e,t,n){"use strict";var o=n("d533"),a=n.n(o);a.a},aab9:function(e,t,n){},b001:function(e,t,n){"use strict";n.r(t);n("097d"),n("22d6");t["default"]={state:{replies:{},loading:!1,slug:null,draft:{}},getters:{GETTER_TOPIC_REPLIES(e,t){return e.slug in e.replies?e.replies[e.slug]:[]},GETTER_TOPIC_DRAFT(e,t){return e.slug in e.draft?e.draft[e.slug]:""},loading(e){return e.loading}},mutations:{appendObj(e,t){let n=t.obj,o=t.prop,a=t.val;!(o in e[n])&&(e[n][o]=[]),e[n][o].push(a)},SET_LOADING_ON(e){e.loading=!0},SET_LOADING_OFF(e){e.loading=!1},SET_TOPIC_REPLIES(e,t){let n=t.prop,o=t.val;e.replies[n]=o},APPEND_TOPIC_REPLY(e,t){let n=t.slug,o=t.obj;e.replies[n].push(o)},SET_SLUG(e,t){e.slug=t},SET_TOPIC_DRAFT(e,t){e.draft[e.slug]=t},CLEAR_TOPIC_DRAFT(e,t){e.draft[t]=val}},actions:{newReply(e,t){let n=e.state,o=e.commit,a=(e.dispatch,t.body);const r=n.slug;return axios.post(`question/${r}/reply`,{body:a}).then(e=>{return o("APPEND_TOPIC_REPLY",{slug:r,obj:e.data.Reply}),o("CLEAR_TOPIC_DRAFT",r),!0}).catch(e=>{return console.warn("[STORE] [catch] newReply => ",e),!1})},getReplies(e){e.state;let t=e.commit;e.dispatch,e.getters;const n=router.history.current.params.slug;return t("SET_SLUG",n),n?(t("SET_LOADING_ON"),axios.get(`question/${n}/reply`).then(e=>{return t("SET_TOPIC_REPLIES",{prop:n,val:e.data.data}),{stat:!0,msg:e.data}}).catch(e=>{return console.warn("ERR in getReplies => ",e),{stat:!1,msg:e}}).finally(e=>{return t("SET_LOADING_OFF"),e})):{stat:!1,msg:"Неверные параметры для отображения комментариев"}}}}},b461:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("v-text-field",{attrs:{label:"E-mail",type:"email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}}),n("v-btn",{attrs:{color:"green",disabled:e.disabled,type:"submit"}},[e.loading?n("v-progress-circular",{attrs:{width:7,color:"purple",indeterminate:""}}):e.disabled?n("v-icon",[e._v("cancel")]):n("v-icon",[e._v("done_outline")]),e._v("\n             \n            Войти\n        ")],1),n("v-btn",{staticClass:"ml-2",attrs:{color:"blue"},on:{click:e.toRegHandler}},[n("v-icon",[e._v("assignment")]),e._v(" Зарегистрироваться")],1)],1)],1)},a=[],r=n("1da1"),i=n("be94"),s=n("2f62"),l={data(){return{form:{email:null,password:null},loading:!1}},mounted(){this["login/loggedIn"]&&this.$router.push({name:"forum"})},computed:Object(i["a"])({},Object(s["c"])(["login/loggedIn"]),{modalMode(){return this.$store.state.toolbar.modalMode},disabled(){return!this.form.email||!this.form.password}}),methods:Object(i["a"])({},Object(s["d"])(["toolbar/SET_MODAL_MODE_OFF"]),Object(s["b"])(["login/login"]),{handleSubmit(){var e=this;return Object(r["a"])(function*(){e.loading=!0;const t=yield e["login/login"](e.form);if(t){const t=e.modalMode;t||e.$router.push({name:"forum"}),e["toolbar/SET_MODAL_MODE_OFF"](),snack("Вы успешно вошли","success")}else snack("Invalid password","error");e.loading=!1})()},toRegHandler(){this.modalMode||this.$router.push({name:"signup"}),this.$emit("toRegMode")}})},c=l,u=n("2877"),d=n("6544"),p=n.n(d),f=n("8336"),m=n("a523"),g=n("4bd4"),h=n("132d"),b=n("490a"),v=n("8654"),_=Object(u["a"])(c,o,a,!1,null,null,null);t["default"]=_.exports;p()(_,{VBtn:f["a"],VContainer:m["a"],VForm:g["a"],VIcon:h["a"],VProgressCircular:b["a"],VTextField:v["a"]})},ba6a:function(e,t,n){"use strict";n.r(t);var o=n("5638");const a=n("bc3a");window.axios=a.create({baseURL:"http://127.0.0.1:8000/api",headers:{common:{"X-Requested-With":"XMLHttpRequest",Authorization:`Bearer ${store.state.login.token}`}}}),axios.interceptors.request.use(e=>{const t=store.token;return t?e.headers.Authorization=`Bearer ${store.state.login.token}`:"Authorization"in e.headers&&delete e.headers.Authorization,e},e=>Promise.reject(e)),window.Pusher=n("782e"),window.Echo=new o["a"]({broadcaster:"pusher",key:"7b08572e181a32553e9a",cluster:"eu",encrypted:!0,auth:{headers:{Authorization:store.state.login.token}}}),Pusher.logToConsole=!0},c668:function(e,t,n){"use strict";n.r(t);n("097d");var o=n("1da1"),a=(n("673e"),n("be94"));n("28a5"),n("a481");t["default"]={state:{token:null,tokenValidation:{iss:"http://localhost/api/auth/login"},user:{role:null,name:null},loading:!1},getters:{TOKEN__isValid(e,t){const n=e=>{try{return btoa(atob(e)).replace(/=/g,"")==e}catch(t){return!1}},o=e=>!!n(e)&&JSON.parse(atob(e)),a=e.token,r="string"==typeof a&&o(a.split(".")[1]);return!!r},TOKEN__isExpired(e,t){if(t.TOKEN__parse)return new Date>1e3*t.TOKEN__parse.exp},TOKEN__parse(e,t){if(t.TOKEN__isValid){const t=e.token.split(".");return Object(a["a"])({},JSON.parse(atob(t[0])),JSON.parse(atob(t[1])))}},TOKEN__isOK(e,t){return!t.TOKEN__isExpired&&t.TOKEN__isValid},id(e,t){if(t.TOKEN__parse)return t.TOKEN__parse.sub},isAdmin(e,t){return t.TOKEN__isOK},isUser(e,t){return t.TOKEN__isOK},username(e,t){return e.user.name},loggedIn(e,t){return t.isUser||t.isAdmin}},mutations:{toggle(e,t){let n=t.prop;e[n]=!e[n]},changeProp(e,t){let n=t.prop,o=t.val;e[n]=o},changeObj(e,t){let n=t.obj,o=t.prop,a=t.val;e[n][o]=a},SET_LOADING_ON(e){e.loading=!0},SET_LOADING_OFF(e){e.loading=!1},SET_TOKEN(e,t){e.token=t,e.user.role="admin"},DROP_TOKEN(e){e.token=null,e.user.role=null}},actions:{login(e,t){return Object(o["a"])(function*(){e.state;let n=e.commit,o=e.dispatch;return n("SET_LOADING_ON"),axios.post("auth/login",t).then(e=>{return n("SET_TOKEN",e.data.access_token),!0}).catch(()=>!1).finally(()=>{n("SET_LOADING_OFF"),o("checkPermitionsOnCurrentPath")})})()},register(e,t){return Object(o["a"])(function*(){let n=e.commit,o=e.dispatch;return n("SET_LOADING_ON"),axios.post("auth/signup",t).then(e=>{return n("SET_TOKEN",e.data.access_token),!0}).catch(e=>e.response&&e.response.data&&e.response.data.errors).finally(()=>{n("SET_LOADING_OFF"),o("checkPermitionsOnCurrentPath")})})()},logout(e){let t=e.commit,n=e.dispatch;t("DROP_TOKEN"),n("checkPermitionsOnCurrentPath")},checkPermitionsOnCurrentPath(e){e.state;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:router.history.current.path;const n=store.state.login.user.role,o=store.getters["toolbar/items"].filter(e=>e["to"]==t);return!o.length||(o[0].roles.includes(n)||o[0].roles.includes("*")?(console.warn("есть права"),!0):(console.warn("нет прав!!"),router.push({name:"forum"}),!1))}}}},d533:function(e,t,n){},eb02:function(e,t,n){"use strict";var o=n("2b0e"),a=n("2f62"),r=n("7af2"),i=n("bfa9");const s=new i["a"]({storage:window.localStorage});o["default"].use(a["a"]),window.store=new a["a"].Store({plugins:[s.plugin],modules:r["default"]}),t["a"]=store},ec85:function(e,t,n){"use strict";n.r(t);var o=n("8468"),a=(n("097d"),n("1da1"));n("22d6");t["default"]={state:{categories:[],loading:!1},getters:{categories(e,t,n,o){e.state,e.getters;return n.category.categories},loading(e,t,n,o){e.state,e.getters;return n.category.loading}},mutations:{changeProp(e,t){let n=t.prop,o=t.val;e[n]=o},SET_LOADING_ON(e){e.loading=!0},SET_LOADING_OFF(e){e.loading=!1}},actions:{getCategories(e){return Object(a["a"])(function*(){let t=e.commit;return t("SET_LOADING_ON"),axios.get("category").then(e=>t("changeProp",{prop:"categories",val:e.data.data})).catch(e=>{console.warn("ERR in getCategories => ",e)}).finally(e=>t("SET_LOADING_OFF"))})()},createCategory(e,t){let n=e.dispatch;return axios.post("category",t).then(()=>{return n("getCategories"),!0})},deleteCategory(e,t){return Object(o["a"])(e),axios.delete(`category/${t}`)},updateCategory(e,t){e.rootState;let n=t.slug,o=t.form;return axios.patch(`category/${n}`,o)}}}},fccd:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[n("v-text-field",{attrs:{label:"Имя",type:"text",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.errors.name?n("span",{staticClass:"red--text"},[e._v(e._s(e.errors.name[0]))]):e._e(),n("v-text-field",{attrs:{label:"E-mail",type:"email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.errors.email?n("span",{staticClass:"red--text"}):e._e(),e.errors.email?n("span",{staticClass:"red--text"},[e._v(e._s(e.errors.email[0]))]):e._e(),n("v-text-field",{attrs:{label:"Пароль",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.errors.password?n("span",{staticClass:"red--text"},[e._v(e._s(e.errors.password[0]))]):e._e(),n("v-text-field",{attrs:{label:"Подтверждение пароля",type:"password",required:""},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}}),n("v-btn",{attrs:{disabled:!e.isFormValid,color:"green",type:"submit"}},[n("v-icon",[e._v("done_outline")]),e._v("\n             Зарегистрироваться\n        ")],1),n("v-btn",{staticClass:"ml-2",attrs:{color:"blue"},on:{click:e.toLoginHandler}},[n("v-icon",[e._v("person")]),e._v("Войти")],1)],1)],1)},a=[],r=n("1da1"),i=n("be94"),s=n("2f62"),l={name:"sign-up",data(){return{form:{name:null,email:null,password:null,password_confirmation:null},errors:{}}},mounted(){this["login/loggedIn"]&&this.goHome()},computed:Object(i["a"])({},Object(s["e"])(["toolbar/modalMode"]),Object(s["c"])(["login/loggedIn"]),{modalMode(){return this.$store.state.toolbar.modalMode},isFormValid(){const e=this.form.name,t=this.form.email,n=this.form.password,o=this.form.password_confirmation;return e&&t&&n&&o}}),destroyed(){this.$emit("toLoginMode")},methods:Object(i["a"])({},Object(s["d"])(["toolbar/SET_MODAL_MODE_OFF"]),Object(s["b"])(["login/register"]),{goHome(){this.$router.push("/forum")},signup(){var e=this;return Object(r["a"])(function*(){const t=e.form.password,n=e.form.password_confirmation;if(t!=n)return snack("Пароли не совпадают!","error");const o=yield e["login/register"](e.form);if(1==o){const t=e.modalMode;t||e.goHome(),e["toolbar/SET_MODAL_MODE_OFF"]()}else o?(e.errors=o,snack("Возникли ошибки во время регистрации","error")):snack("Возникла сетевая ошибка во время регистрации","error")})()},toLoginHandler(){this.modalMode||this.$router.push({name:"login"}),this.$emit("toLoginMode")}})},c=l,u=n("2877"),d=n("6544"),p=n.n(d),f=n("8336"),m=n("a523"),g=n("4bd4"),h=n("132d"),b=n("8654"),v=Object(u["a"])(c,o,a,!1,null,null,null);t["default"]=v.exports;p()(v,{VBtn:f["a"],VContainer:m["a"],VForm:g["a"],VIcon:h["a"],VTextField:b["a"]})},fcf7:function(e,t,n){"use strict";n.r(t),t["default"]={state:{modalMode:!1},mutations:{SET_MODAL_MODE_ON(e){e.modalMode=!0},SET_MODAL_MODE_OFF(e){e.modalMode=!1}},getters:{items(e,t,n,o){e.state,e.getters;const a=o["login/isAdmin"],r=o["login/isUser"],i=a||r;return[{title:"Форум",to:"/forum",icon:"question_answer",show:!0,roles:["*"]},{title:"Создать тему",to:"/ask",icon:"plus_one",show:i,roles:["admin","user"]},{title:"Редактор категорий",to:"/edit-categories",icon:"bookmarks",show:i,roles:["admin"]},{title:"Войти",icon:"person",show:!i,roles:["guest"]},{title:"Выйти",icon:"exit_to_app",show:i,roles:["admin","user"]}]}}}},fe80:function(e,t,n){"use strict";n.r(t);n("22d6"),n("eb02");t["default"]={state:{notifications:{}},getters:{read(e,t){const n=e.notifications;return n&&n&&n.read},unread(e,t){const n=e.notifications;return n&&n&&n.unread}},mutations:{toggle(e,t){let n=t.prop;e[n]=!e[n]},changeProp(e,t){let n=t.prop,o=t.val;e[n]=o},changeObj(e,t){let n=t.obj,o=t.prop,a=t.val;e[n][o]=a},spliceObj(e,t){let n=t.notification;e.notifications.unread.splice(n,1)}},actions:{getNotifications(e,t){e.state;let n=e.commit;e.dispatch;return axios.post("notifications").then(e=>{return n("changeProp",{prop:"notifications",val:{read:e.data.read,unread:e.data.unread}}),!0}).catch(e=>{return console.warn("[STORE][getNotifications] err =>",e),!1})},markAsRead(e,t){e.state;let n=e.commit;e.dispatch;return axios.post("markAsRead",{id:t.id}).then(e=>{return n("changeObj",{obj:"notifications",prop:"read",val:t}),n("spliceObj",{notification:t}),!0}).catch(e=>{console.warn("[STORE][markAsRead] err =>",e)})}}}}});
//# sourceMappingURL=app.a5ba5d02.js.map