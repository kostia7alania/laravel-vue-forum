(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cb249a9"],{"5ac0":function(t,e,n){"use strict";var r=n("a73f"),i=n.n(r);i.a},a73f:function(t,e,n){},b761:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t.errors?n("v-alert",{attrs:{type:"error",color:"red",value:!0}},[t._v("\n        Формат категорий неверный (должен содержать минимум 2 слова)\n    ")]):t._e(),n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("v-text-field",{attrs:{label:"Category Name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}}),n("v-btn",{attrs:{type:"submit",disabled:t.disabled,color:t.editSlug?"pink":"teal"}},[t.loading?n("v-progress-circular",{attrs:{size:20,width:3,color:"purple",indeterminate:""}}):n("v-icon",[t._v(t._s(t.editSlug?"update":"playlist_add"))]),t._v("\n                    "+t._s(t.editSlug?"Update":"Create")+"\n        ")],1),t.editSlug&&!t.loading?n("v-btn",{attrs:{color:"purple"},on:{click:t.cancelEditing}},[n("v-icon",[t._v("cancel")]),t._v("\n            Отмена\n        ")],1):t._e()],1),n("v-card",[n("v-toolbar",{attrs:{color:"indigo",dark:"",dense:""}},[n("v-toolbar-title",[t._v("Категории\n            "),t.category_loading?n("v-progress-circular",{attrs:{size:20,width:3,color:"purple",indeterminate:""}}):t._e()],1)],1),n("v-list",t._l(t.categories,function(e,r){return n("div",{key:e.id},[n("v-list-item",[n("v-list-item-action",[n("v-btn",{attrs:{icon:"",small:"",disabled:t.editSlug==e.slug||t.deletingSlug==e.slug||t.loading},on:{click:function(n){return t.edit(e.name,e.slug)}}},[n("v-icon",{attrs:{color:"orange"}},[t._v("edit")])],1)],1),n("v-list-item-content",[n("v-list-item-title",{class:t.deletingSlug==e.slug?"deleting-text":""},[t._v("\n                        "+t._s(e.name)+"\n                    ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:"",small:"",disabled:t.deletingSlug==e.slug},on:{click:function(n){return t.destroy(e.slug,r)}}},[t.deletingSlug==e.slug?n("v-progress-circular",{attrs:{size:20,width:3,color:"purple",indeterminate:""}}):n("v-icon",{attrs:{color:"red"}},[t._v("delete")])],1)],1)],1),n("v-divider")],1)}),0)],1)],1)},i=[],a=(n("96cf"),n("3b8d")),o=(n("7f7f"),n("cebc")),s=n("2f62"),c={name:"Edit-Categories",data:function(){return{loading:!1,form:{name:null},editSlug:null,errors:null,deletingSlug:null}},created:function(){this["login/isAdmin"]?this["category/getCategories"]():(console.warn("Брысь отсюда! Ты не админ .!. "),this.$router.push({name:"forum"}))},watch:{isAdmin:function(t,e){t||(console.warn("Брысь отсюда! Ты не админ .!. "),this.$router.push({name:"forum"}))}},computed:Object(o["a"])({},Object(s["c"])(["login/isAdmin","category/categories","category/loading"]),{isAdmin:function(){return this["login/isAdmin"]},disabled:function(){return!this.form.name||this.loading},categories:function(){return this["category/categories"]},category_loading:function(){return this["category/loading"]}}),methods:Object(o["a"])({},Object(s["b"])(["category/getCategories","category/createCategory","category/updateCategory","category/deleteCategory"]),{cancelEditing:function(){this.editSlug=null,this.form.name=null},submit:function(){this.editSlug?this.update():this.create()},update:function(){var t=this;this.loading=!0,this["category/updateCategory"]({slug:this.editSlug,form:this.form}).then(Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return snack("Имя категории успешно изменено","success"),e.next=3,t["category/getCategories"]();case 3:t.form.name=null,t.editSlug=null;case 5:case"end":return e.stop()}},e)}))).catch(function(t){console.warn(t),snack("Ошибка при обновлении имени категории","error")}).finally(function(){return t.loading=!1})},create:function(){var t=this;this.loading=!0,this["category/createCategory"](this.form).then(function(){t.form.name=null,snack("Категория успешно создана","success")}).catch(function(e){console.warn(e),t.errors=e.response.data.errors,snack("Ошибка при создании категории","error")}).finally(function(){return t.loading=!1})},destroy:function(t,e){var n=this;this.deletingSlug=t,this["category/deleteCategory"](t).then(Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return snack("Категория успешно удалена","success"),t.next=3,n["category/getCategories"]();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}))).catch(function(t){console.warn(t),snack("Ошибка при удалении категории","error")}).finally(function(){return n.deletingSlug=null})},edit:function(t,e){this.form.name=t,this.editSlug=e}})},l=c,u=(n("5ac0"),n("2877")),d=n("6544"),g=n.n(d),m=n("0798"),f=n("8336"),h=n("b0af"),v=n("a523"),p=n("ce7e6"),b=n("4bd4"),y=n("132d"),w=n("8860"),_=n("da13"),k=n("1800"),S=n("5d23"),C=n("490a"),V=n("8654"),x=n("2a7f"),j=Object(u["a"])(l,r,i,!1,null,null,null);e["default"]=j.exports;g()(j,{VAlert:m["a"],VBtn:f["a"],VCard:h["a"],VContainer:v["a"],VDivider:p["a"],VForm:b["a"],VIcon:y["a"],VList:w["a"],VListItem:_["a"],VListItemAction:k["a"],VListItemContent:S["a"],VListItemTitle:S["b"],VProgressCircular:C["a"],VTextField:V["a"],VToolbar:x["a"],VToolbarTitle:x["b"]})}}]);
//# sourceMappingURL=chunk-7cb249a9-legacy.52cd2f3e.js.map