(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cb249a9"],{"5ac0":function(e,t,i){"use strict";var r=i("a73f"),a=i.n(r);a.a},a73f:function(e,t,i){},b761:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[e.errors?i("v-alert",{attrs:{type:"error",color:"red",value:!0}},[e._v("\n        Формат категорий неверный (должен содержать минимум 2 слова)\n    ")]):e._e(),i("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[i("v-text-field",{attrs:{label:"Category Name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}}),i("v-btn",{attrs:{type:"submit",disabled:e.disabled,color:e.editSlug?"pink":"teal"}},[e.loading?i("v-progress-circular",{attrs:{size:20,width:3,color:"purple",indeterminate:""}}):i("v-icon",[e._v(e._s(e.editSlug?"update":"playlist_add"))]),e._v("\n                    "+e._s(e.editSlug?"Update":"Create")+"\n        ")],1),e.editSlug&&!e.loading?i("v-btn",{attrs:{color:"purple"},on:{click:e.cancelEditing}},[i("v-icon",[e._v("cancel")]),e._v("\n            Отмена\n        ")],1):e._e()],1),i("v-card",[i("v-toolbar",{attrs:{color:"indigo",dark:"",dense:""}},[i("v-toolbar-title",[e._v("Категории\n            "),e.category_loading?i("v-progress-circular",{attrs:{size:20,width:3,color:"purple",indeterminate:""}}):e._e()],1)],1),i("v-list",e._l(e.categories,function(t,r){return i("div",{key:t.id},[i("v-list-item",[i("v-list-item-action",[i("v-btn",{attrs:{icon:"",small:"",disabled:e.editSlug==t.slug||e.deletingSlug==t.slug||e.loading},on:{click:function(i){return e.edit(t.name,t.slug)}}},[i("v-icon",{attrs:{color:"orange"}},[e._v("edit")])],1)],1),i("v-list-item-content",[i("v-list-item-title",{class:e.deletingSlug==t.slug?"deleting-text":""},[e._v("\n                        "+e._s(t.name)+"\n                    ")])],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:"",small:"",disabled:e.deletingSlug==t.slug},on:{click:function(i){return e.destroy(t.slug,r)}}},[e.deletingSlug==t.slug?i("v-progress-circular",{attrs:{size:20,width:3,color:"purple",indeterminate:""}}):i("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)],1),i("v-divider")],1)}),0)],1)],1)},a=[],n=i("1da1"),l=(i("097d"),i("be94")),o=i("2f62"),s={name:"Edit-Categories",data(){return{loading:!1,form:{name:null},editSlug:null,errors:null,deletingSlug:null}},created(){this["login/isAdmin"]?this["category/getCategories"]():(console.warn("Брысь отсюда! Ты не админ .!. "),this.$router.push({name:"forum"}))},watch:{isAdmin(e,t){e||(console.warn("Брысь отсюда! Ты не админ .!. "),this.$router.push({name:"forum"}))}},computed:Object(l["a"])({},Object(o["c"])(["login/isAdmin","category/categories","category/loading"]),{isAdmin(){return this["login/isAdmin"]},disabled(){return!this.form.name||this.loading},categories(){return this["category/categories"]},category_loading(){return this["category/loading"]}}),methods:Object(l["a"])({},Object(o["b"])(["category/getCategories","category/createCategory","category/updateCategory","category/deleteCategory"]),{cancelEditing(){this.editSlug=null,this.form.name=null},submit(){this.editSlug?this.update():this.create()},update(){var e=this;this.loading=!0,this["category/updateCategory"]({slug:this.editSlug,form:this.form}).then(Object(n["a"])(function*(){snack("Имя категории успешно изменено","success"),yield e["category/getCategories"](),e.form.name=null,e.editSlug=null})).catch(e=>{console.warn(e),snack("Ошибка при обновлении имени категории","error")}).finally(()=>this.loading=!1)},create(){this.loading=!0,this["category/createCategory"](this.form).then(()=>{this.form.name=null,snack("Категория успешно создана","success")}).catch(e=>{console.warn(e),this.errors=e.response.data.errors,snack("Ошибка при создании категории","error")}).finally(()=>this.loading=!1)},destroy(e,t){var i=this;this.deletingSlug=e,this["category/deleteCategory"](e).then(Object(n["a"])(function*(){return snack("Категория успешно удалена","success"),yield i["category/getCategories"]()})).catch(e=>{console.warn(e),snack("Ошибка при удалении категории","error")}).finally(()=>this.deletingSlug=null)},edit(e,t){this.form.name=e,this.editSlug=t}})},c=s,d=(i("5ac0"),i("2877")),u=i("6544"),g=i.n(u),m=i("0798"),h=i("8336"),v=i("b0af"),f=i("a523"),b=i("ce7e"),y=i("4bd4"),p=i("132d"),_=i("8860"),S=i("da13"),C=i("1800"),k=i("5d23"),V=i("490a"),w=i("8654"),j=i("2a7f"),A=Object(d["a"])(c,r,a,!1,null,null,null);t["default"]=A.exports;g()(A,{VAlert:m["a"],VBtn:h["a"],VCard:v["a"],VContainer:f["a"],VDivider:b["a"],VForm:y["a"],VIcon:p["a"],VList:_["a"],VListItem:S["a"],VListItemAction:C["a"],VListItemContent:k["a"],VListItemTitle:k["b"],VProgressCircular:V["a"],VTextField:w["a"],VToolbar:j["a"],VToolbarTitle:j["b"]})}}]);
//# sourceMappingURL=chunk-7cb249a9.19ff20ac.js.map