{"version":3,"sources":["webpack:///./src/components/category/EditCategories.vue?f556","webpack:///./src/components/category/EditCategories.vue?13b7","webpack:///src/components/category/EditCategories.vue","webpack:///./src/components/category/EditCategories.vue?b00d","webpack:///./src/components/category/EditCategories.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EditCategories_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EditCategories_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","type","color","value","_v","_e","on","submit","$event","preventDefault","label","required","model","form","callback","$$v","$set","trim","expression","disabled","editSlug","size","width","indeterminate","_s","loading","click","cancelEditing","dark","dense","_l","category","index","key","id","icon","small","slug","deletingSlug","edit","name","class","destroy","staticRenderFns","EditCategoriesvue_type_script_lang_js_","data","errors","created","computed","Object","objectSpread","vuex_esm","categories","category_loading","methods","update","create","_this","then","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","snack","stop","catch","err","console","warn","finally","_this2","response","_this3","_callee2","_context2","abrupt","sent","category_EditCategoriesvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-61201598.b4cf72c5.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditCategories.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditCategories.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[(_vm.errors)?_c('v-alert',{attrs:{\"type\":\"error\",\"color\":\"red\",\"value\":true}},[_vm._v(\"\\n        Pleasse give category name\\n    \")]):_vm._e(),_c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('v-text-field',{attrs:{\"label\":\"Category Name\",\"required\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.name\"}}),_c('v-btn',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disabled,\"color\":_vm.editSlug?'pink':'teal'}},[(_vm.loading)?_c('v-progress-circular',{attrs:{\"size\":20,\"width\":3,\"color\":\"purple\",\"indeterminate\":\"\"}}):_c('v-icon',[_vm._v(_vm._s(_vm.editSlug?\"update\":\"playlist_add\"))]),_vm._v(\"\\n                    \"+_vm._s(_vm.editSlug?\"Update\":\"Create\")+\"\\n        \")],1),(_vm.editSlug && !_vm.loading)?_c('v-btn',{attrs:{\"color\":\"purple\"},on:{\"click\":_vm.cancelEditing}},[_c('v-icon',[_vm._v(\"cancel\")]),_vm._v(\"\\n            Cancel\\n        \")],1):_vm._e()],1),_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"indigo\",\"dark\":\"\",\"dense\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"Categories\\n            \"),(_vm.category_loading)?_c('v-progress-circular',{attrs:{\"size\":20,\"width\":3,\"color\":\"purple\",\"indeterminate\":\"\"}}):_vm._e()],1)],1),_c('v-list',_vm._l((_vm.categories),function(category,index){return _c('div',{key:category.id},[_c('v-list-tile',[_c('v-list-tile-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"disabled\":_vm.editSlug==category.slug || _vm.deletingSlug==category.slug || _vm.loading},on:{\"click\":function($event){return _vm.edit(category.name, category.slug)}}},[_c('v-icon',{attrs:{\"color\":\"orange\"}},[_vm._v(\"edit\")])],1)],1),_c('v-list-tile-content',[_c('v-list-tile-title',{class:_vm.deletingSlug==category.slug?'deleting-text':''},[_vm._v(\"\\n                        \"+_vm._s(category.name)+\"\\n                    \")])],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\",\"disabled\":_vm.deletingSlug==category.slug},on:{\"click\":function($event){return _vm.destroy(category.slug, index)}}},[(_vm.deletingSlug==category.slug)?_c('v-progress-circular',{attrs:{\"size\":20,\"width\":3,\"color\":\"purple\",\"indeterminate\":\"\"}}):_c('v-icon',{attrs:{\"color\":\"red\"}},[_vm._v(\"delete\")])],1)],1)],1),_c('v-divider')],1)}),0)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <v-container>\n\n        <v-alert v-if=\"errors\" type=\"error\" color=\"red\" :value=\"true\">\n            Pleasse give category name\n        </v-alert>\n\n        <v-form @submit.prevent=\"submit\">\n\n            <v-text-field\n                label=\"Category Name\"\n                v-model.trim=\"form.name\"\n                required\n            ></v-text-field>\n\n            <v-btn type=\"submit\" :disabled=\"disabled\" :color=\"editSlug?'pink':'teal'\">\n                <v-progress-circular v-if=\"loading\" :size=\"20\" :width=\"3\" color=\"purple\" indeterminate ></v-progress-circular>\n                <v-icon v-else>{{editSlug?\"update\":\"playlist_add\"}}</v-icon>\n                        {{ editSlug?\"Update\":\"Create\" }}\n            </v-btn>\n            <v-btn v-if=\"editSlug && !loading\" color=\"purple\" @click=\"cancelEditing\">\n                <v-icon>cancel</v-icon>\n                Cancel\n            </v-btn>\n\n        </v-form>\n\n        <v-card>\n            <v-toolbar color=\"indigo\" dark dense>\n            <v-toolbar-title>Categories\n                <v-progress-circular v-if=\"category_loading\" :size=\"20\" :width=\"3\" color=\"purple\" indeterminate ></v-progress-circular>\n            </v-toolbar-title>\n            </v-toolbar>\n\n            <v-list>\n                <div v-for=\"(category,index) in categories\" :key=\"category.id\">\n                <v-list-tile>\n                    <v-list-tile-action>\n                        <v-btn icon small @click=\"edit(category.name, category.slug)\" :disabled=\"editSlug==category.slug || deletingSlug==category.slug || loading\">\n                            <v-icon color=\"orange\">edit</v-icon>\n                        </v-btn>\n                    </v-list-tile-action>\n\n                    <v-list-tile-content>\n                        <v-list-tile-title :class=\"deletingSlug==category.slug?'deleting-text':''\">\n                            {{ category.name }}\n                        </v-list-tile-title>\n                    </v-list-tile-content>\n\n                    <v-list-tile-action>\n                        <v-btn icon small @click=\"destroy(category.slug, index)\" :disabled=\"deletingSlug==category.slug\">\n                            <v-progress-circular v-if=\"deletingSlug==category.slug\" :size=\"20\" :width=\"3\" color=\"purple\" indeterminate ></v-progress-circular>\n                            <v-icon color=\"red\" v-else>delete</v-icon>\n                        </v-btn>\n                    </v-list-tile-action>\n\n                </v-list-tile>\n                <v-divider/>\n                </div>\n\n            </v-list>\n        </v-card>\n\n    </v-container>\n</template>\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  name: \"Edit-Categories\",\n  data() {\n    return {\n      loading: false,\n      form: {\n        name: null\n      },\n      editSlug: null,\n      errors: null,\n      deletingSlug: null\n    };\n  },\n  created() {\n    /*\n    if(!this['login/isAdmin']) { //выкидываем за шкирку НЕадмина;\n        console.warn('Брысь отсюда! Ты не админ .!. ');\n        this.$router.push( { name:'forum' } )\n    } else */\n    this[\"category/getCategories\"]();\n  },\n  computed: {\n    ...mapGetters([\"login/isAdmin\", \"category/categories\", \"category/loading\"]),\n    disabled() {\n      return !this.form.name || this.loading;\n    },\n    categories() {\n      return this[\"category/categories\"];\n    },\n    category_loading() {\n      return this[\"category/loading\"];\n    }\n  },\n  methods: {\n    ...mapActions([\n      \"category/getCategories\",\n      \"category/createCategory\",\n      \"category/updateCategory\",\n      \"category/deleteCategory\"\n    ]),\n    cancelEditing() {\n      this.editSlug = null;\n      this.form.name = null;\n    },\n    submit() {\n      this.editSlug ? this.update() : this.create();\n    },\n    update() {\n      this.loading = true;\n      this[\"category/updateCategory\"]({ slug: this.editSlug, form: this.form })\n        .then(async () => {\n            snack(\"Имя категории успешно изменено\", \"success\")\n            await this[\"category/getCategories\"]()\n            this.form.name = null;\n            this.editSlug = null;\n        })\n        .catch(err => {\n          console.warn(err);\n          snack(\"Ошибка при обновлении имени категории\", \"error\");\n        })\n        .finally(() => (this.loading = false));\n    },\n    create() {\n      this.loading = true;\n      this[\"category/createCategory\"](this.form)\n        .then(() => {\n            this.form.name = null\n            snack(\"Категория успешно создана\", \"success\")\n        })\n        .catch(err => {\n          console.warn(err);\n          this.errors = err.response.data.errors;\n          snack(\"Ошибка при создании категории\", \"error\");\n        })\n        .finally(() => (this.loading = false));\n    },\n    destroy(slug, index) {\n      this.deletingSlug = slug;\n      this[\"category/deleteCategory\"](slug)\n        .then(async () => {\n            snack(\"Категория успешно удалена\", \"success\")\n            return await this[\"category/getCategories\"]()\n        })\n        .catch(err => {\n          console.warn(err);\n          snack(\"Ошибка при удалении категории\", \"error\");\n        })\n        .finally(() => (this.deletingSlug = null));\n    },\n    edit(name,slug) {\n      this.form.name = name;\n      this.editSlug = slug;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" >\n.deleting-text {\n  text-decoration: line-through;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditCategories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditCategories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditCategories.vue?vue&type=template&id=50f5dd42&\"\nimport script from \"./EditCategories.vue?vue&type=script&lang=js&\"\nexport * from \"./EditCategories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditCategories.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}