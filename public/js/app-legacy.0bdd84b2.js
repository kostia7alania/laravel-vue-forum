(function(t){function e(e){for(var o,r,c=e[0],s=e[1],u=e[2],l=0,d=[];l<c.length;l++)r=c[l],a[r]&&d.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);f&&f(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a={app:0},i=[];function c(t){return s.p+"js/"+({}[t]||t)+"-legacy."+{"chunk-1b9d707c":"b8eccd53","chunk-22bd7c7e":"4b67fd71","chunk-3c365ea6":"72c4e9f6","chunk-676e8f9a":"72554912","chunk-7b2e2ca8":"6342b3ce","chunk-7cb249a9":"52cd2f3e"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-1b9d707c":1,"chunk-22bd7c7e":1,"chunk-3c365ea6":1,"chunk-676e8f9a":1,"chunk-7b2e2ca8":1,"chunk-7cb249a9":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise(function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-1b9d707c":"b8a02323","chunk-22bd7c7e":"207fb0f9","chunk-3c365ea6":"16d17fc7","chunk-676e8f9a":"d7f66413","chunk-7b2e2ca8":"75a58ff6","chunk-7cb249a9":"8da95a5f"}[t]+".css",a=s.p+o,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===a))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===o||l===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[t],f.parentNode.removeChild(f),n(i)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){r[t]=0}));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var i=new Promise(function(e,n){o=a[t]=[e,n]});e.push(o[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(t),u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+o+": "+r+")");i.type=o,i.request=r,n[1](i)}a[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"017c":function(t,e,n){var o={"./category.js":"ec85","./global.js":"1a43","./index.js":"7af2","./login.js":"c668","./notification.js":"fe80","./question.js":"7972","./reply.js":"b001","./toolbar.js":"fcf7"};function r(t){var e=a(t);return n(e)}function a(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=a,t.exports=r,r.id="017c"},1:function(t,e){},"1a43":function(t,e,n){"use strict";n.r(e),e["default"]={state:{},getters:{},mutations:{},actions:{}}},"20c9":function(t,e,n){},"22d6":function(t,e,n){"use strict";var o=n("d225"),r=n("b0b4"),a=function(){function t(){Object(o["a"])(this,t)}return Object(r["a"])(t,[{key:"storeToken",value:function(t){return localStorage.setItem("token",t)}},{key:"store",value:function(t){this.storeToken(t)}},{key:"clear",value:function(){localStorage.removeItem("token")}},{key:"getToken",value:function(){return localStorage.getItem("token")}}]),t}();a=new a},"52d9":function(t,e,n){"use strict";var o=n("aab9"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),r=n("f309"),a=n("2992"),i=n.n(a);o["default"].use(r["a"]);var c=new r["a"]({icons:{theme:{dark:!0,themes:{light:{primary:"#42a5f5"},dark:{primary:"#2196F3"}}},options:{customProperties:!0},iconfont:"mdi"},lang:{locales:{ru:i.a},current:"ru"}}),s=(n("456d"),n("ac6a"),n("5df3"),n("1c4c"),n("7514"),n("96cf"),n("3b8d")),u=n("8c4f"),l=n("eb02");o["default"].use(u["a"]);var d=[{name:"main",meta:{title:"Main Page - Forum App",metaTags:[{name:"description of main page",content:"The main page of our example app."},{property:"og:description",content:"The content sections of main page of our forum app."}]},path:"/",component:function(){return n.e("chunk-676e8f9a").then(n.bind(null,"405f"))}},{name:"forum",meta:{title:"Forum"},path:"/forum",component:function(){return n.e("chunk-22bd7c7e").then(n.bind(null,"d10c"))}},{name:"CategoryQuestions",meta:{title:":slug - Forum Category"},path:"/category/:slug",component:function(){return n.e("chunk-22bd7c7e").then(n.bind(null,"d10c"))}},{name:"ask",meta:{title:"Create question"},path:"/ask",component:function(){return n.e("chunk-3c365ea6").then(n.bind(null,"4a37"))}},{name:"signup",meta:{title:"Signup"},path:"/signup",component:function(){return Promise.resolve().then(n.bind(null,"fccd"))}},{name:"edit-categories",meta:{title:"Edit categories"},path:"/edit-categories",component:function(){return n.e("chunk-7cb249a9").then(n.bind(null,"b761"))}},{name:"login",meta:{title:"Login"},path:"/login",component:function(){return Promise.resolve().then(n.bind(null,"b461"))}},{name:"read",meta:{title:"Article"},path:"/question/:slug",component:function(){return n.e("chunk-7b2e2ca8").then(n.bind(null,"3a83"))}},{path:"*",meta:{title:"Page not found!"},component:function(){return n.e("chunk-1b9d707c").then(n.bind(null,"be4d"))}}],f=new u["a"]({routes:d,hashbang:!1,mode:"history"});f.beforeEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,n,o){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"]._actions["login/checkPermitionsOnCurrentPath"][0](e.path);case 2:if(!t.sent){t.next=7;break}console.warn("ROUTER: есть права"),o(),t.next=9;break;case 7:console.warn("ROUTER: нет прав"),o({name:"forum"});case 9:case"end":return t.stop()}},t)}));return function(e,n,o){return t.apply(this,arguments)}}()),f.beforeEach(function(t,e,n){var o=t.matched.slice().reverse().find(function(t){return t.meta&&t.meta.title}),r=t.matched.slice().reverse().find(function(t){return t.meta&&t.meta.metaTags});e.matched.slice().reverse().find(function(t){return t.meta&&t.meta.metaTags});if(o&&(document.title=o.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map(function(t){return t.parentNode.removeChild(t)}),!r)return n();r.meta.metaTags.map(function(t){var e=document.createElement("meta");return Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])}),e.setAttribute("data-vue-router-controlled",""),e}).forEach(function(t){return document.head.appendChild(t)}),n()});var p=f,m=n("9483");Object(m["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var g=n("ce5b"),h=n.n(g),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{staticClass:"app"},[n("toolbar"),n("keep-alive",{attrs:{max:"1"}},[n("router-view",{key:t.$route.fullPath})],1),n("snack"),n("foot-app")],1)},v=[],_=n("cebc"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{attrs:{color:"indigo",dark:"","z-index":"2","data-app":""}},[n("div",{staticClass:"hidden-md-and-up"},[n("v-menu",{attrs:{bottom:"",left:"","z-index":"223"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({attrs:{dark:"",icon:""}},o),[n("v-app-bar-nav-icon")],1)]}}])},[n("v-list",t._l(t.items,function(e,o){return n("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],key:o,attrs:{to:e.to},on:{click:function(n){return t.manuClickHandler(e.title)}}},[n("v-list-item-title",[n("v-btn",{attrs:{text:""}},[n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v(t._s(e.icon))])],1),t._v("\n                          "+t._s(e.title)+"\n                      ")],1)],1)],1)}),1)],1)],1),n("v-toolbar-title",{staticClass:"white--text"},[n("v-icon",[t._v("nature_people")]),t._v(" Форум\n  ")],1),n("v-spacer"),t.loggedIn?n("app-notification"):t._e(),n("div",{staticClass:"hidden-sm-and-down"},t._l(t.items,function(e){return n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],key:e.title,attrs:{ripple:!1,text:"",to:e.to},on:{click:function(n){return t.manuClickHandler(e.title)}}},[n("v-icon",[t._v(t._s(e.icon))]),t._v("\n          "+t._s(e.title)+"\n      ")],1)}),1),n("div",{staticClass:"text-xs-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[n("v-icon",[t._v(t._s(t.regMode?"assignment":"person"))]),t._v("\n        "+t._s(t.regMode?"Форма регистрации":"Форма входа")+"\n      ")],1),t.modal?n("v-card-text",[t.regMode?n("SignupVue",{on:{toLoginMode:function(e){t.regMode=!1}}}):n("LoginVue",{on:{toRegMode:function(e){t.regMode=!0}}})],1):t._e()],1)],1)],1)],1)},w=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{clsas:"text-xs-center"}},[n("v-menu",{attrs:{"offset-y":""}},[t.noNews?n("v-alert",{staticClass:"ma-0 pa-0",attrs:{value:!0,type:"primary"}},[t._v("\n                Нету новостей\n            ")]):t._e(),n("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[n("v-icon",{attrs:{color:t.unreadCount?"red":"red lighten-4"}},[t._v("add_alert")]),t._v("\n            "+t._s(t.unreadCount)+"\n        ")],1),n("v-list",{class:t.noAlerts?"ma-0 pa-0":"pb-0"},[t._l(t.unread,function(e){return n("v-list-item",{key:e.id},[n("router-link",{attrs:{to:e.path}},[n("v-list-item-title",{on:{click:function(n){return t.markAsRead(e)}}},[t._v(t._s(e.question))])],1)],1)}),t.unreadCount?n("v-divider"):t._e(),t._l(t.read,function(e){return n("v-list-item",{key:e.id},[n("router-link",{attrs:{to:e.path}},[n("v-list-item-title",[t._v(t._s(e.question))])],1)],1)}),t.noAlerts?n("v-alert",{staticClass:"ma-0 pa-0",attrs:{value:!0,type:"primary"}},[t._v("\n                Нету оповещений\n            ")]):t._e()],2)],1)],1)},y=[],E=n("2f62"),T={name:"notifics",data:function(){return{inited:!1,sound:"https://www.soundsnap.com/streamers/play.php?id=1554465771.2719:f58b2a1ec50f5a5b79ed74d836d2eaf5a2bb11bf:f25ca3cbbbabc600c18619f588ee0dcca822172413031b9a056fd1630e73ba2c2679ee348c5b56583ca59d4991f14127b8864d3e2470b3f99886768a7d15eec51084495434374d0349db5c4692805249960df3d70666eaeaa184aafadbd04757a4817a0bbe20252aad7a46d82f7af97614d23353e3632e798535b8ccf6e381d8eb2f51bed6cda2c33c7d111a8750e4a031ec38acbd4b8c99a0fb212930aa07b40458547b8fb80d1e020fa595b7fd75bb8f93a0aa1b0a23d595344668f7084bc65d5c3d2941a2afc7e3ed0c18f9bc1cd606a9b8934f8be11fbbf5e42b7c3313d7"}},created:function(){this.getNotifications(),this.initLiveNotifications()},computed:Object(_["a"])({},Object(E["c"])(["login/loggedIn","login/id","notification/read","notification/unread"]),{loggedIn:function(){return this["login/loggedIn"]},noAlerts:function(){return!this.unreadCount&&!this.readCount},noNews:function(){return!this.unreadCount},read:function(){return this["notification/read"]},unread:function(){return this["notification/unread"]},readCount:function(){var t=this.read;return t&&t instanceof Array&&t.length},unreadCount:function(){var t=this.unread;return t&&t instanceof Array&&t.length}}),watch:{loggedIn:function(t,e){alert(""),this.getNotifications(),this.initLiveNotifications()}},methods:Object(_["a"])({},Object(E["b"])(["notification/getNotifications","notification/markAsRead"]),{getNotifications:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this["login/loggedIn"]){t.next=5;break}return t.next=3,this["notification/getNotifications"]();case 3:e=t.sent,e?console.log("GET NOTIF: success"):console.warn("GET NOTIF: failed");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),initLiveNotifications:function(){var t=this;this["login/loggedIn"]&&!this.inited&&(window.playSound=this.playSound,Echo.private("App.User."+this["login/id"]).notification(function(e){console.log("app notif.vue ->",e,e.type),t.playSound(),t.getNotifications(),t.inited=!0}))},playSound:function(){var t=new Audio(this.sound);t.play()},markAsRead:function(t){this["notification/markAsRead"](t)}})},x=T,j=(n("52d9"),n("2877")),N=n("6544"),A=n.n(N),S=n("0798"),C=n("8336"),P=n("ce7e6"),R=n("132d"),L=n("8860"),I=n("da13"),M=n("5d23"),D=n("e449"),F=Object(j["a"])(x,k,y,!1,null,null,null),V=F.exports;A()(F,{VAlert:S["a"],VBtn:C["a"],VDivider:P["a"],VIcon:R["a"],VList:L["a"],VListItem:I["a"],VListItemTitle:M["b"],VMenu:D["a"]});var q=n("b461"),K=n("fccd"),$={name:"TOOLbar",components:{AppNotification:V,LoginVue:q["default"],SignupVue:K["default"]},data:function(){return{regMode:!1}},computed:Object(_["a"])({},Object(E["e"])([]),Object(E["c"])(["login/loggedIn","toolbar/items"]),{modal:{get:function(){return this.$store.state.toolbar.modalMode},set:function(t){t?this["toolbar/SET_MODAL_MODE_ON"]():this["toolbar/SET_MODAL_MODE_OFF"]()}},items:function(){return this["toolbar/items"]},loggedIn:function(){return this["login/loggedIn"]}}),methods:Object(_["a"])({},Object(E["d"])(["toolbar/SET_MODAL_MODE_ON","toolbar/SET_MODAL_MODE_OFF"]),Object(E["b"])(["login/logout"]),{manuClickHandler:function(t){"Выйти"==t&&this.logout(),"Войти"==t&&this["toolbar/SET_MODAL_MODE_ON"]()},logout:function(){console.log("login/logout"),this["login/logout"]()}})},G=$,B=n("5bc1"),H=n("b0af"),U=n("e99f"),z=n("99d9"),Q=n("169a"),J=n("9910"),Y=n("2a7f"),X=Object(j["a"])(G,O,w,!1,null,null,null),W=X.exports;A()(X,{VAppBarNavIcon:B["a"],VBtn:C["a"],VCard:H["a"],VCardText:U["a"],VCardTitle:z["b"],VDialog:Q["a"],VIcon:R["a"],VList:L["a"],VListItem:I["a"],VListItemTitle:M["b"],VMenu:D["a"],VSpacer:J["a"],VToolbar:Y["a"],VToolbarTitle:Y["b"]});var Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{bottom:"bottom"===t.y,left:"left"===t.x,"multi-line":"multi-line"===t.mode,right:"right"===t.x,timeout:t.timeout,top:"top"===t.y,vertical:"vertical"===t.mode,color:t.color},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+"\n  "),n("v-btn",{attrs:{color:"pink",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v(" Закрыть\n  ")])],1)},tt=[],et={data:function(){return{snackbar:!1,y:"top",x:null,mode:"",timeout:6e3,text:"Hello, I'm a snackbar",color:"info"}},mounted:function(){var t=this;window.snack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Attention",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";t.text=e,t.color=n,t.snackbar=!0}}},nt=et,ot=n("2db4"),rt=Object(j["a"])(nt,Z,tt,!1,null,null,null),at=rt.exports;A()(rt,{VBtn:C["a"],VSnackbar:ot["a"]});var it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{staticClass:"justify-center"},[n("v-card-actions",{staticClass:"justify-center"},[n("v-flex",{attrs:{"lighten-1":"","py-1":"","text-xs-center":"","grey--text":"",xs12:""}},[n("strong",[t._v("ФОРУМ")]),t._v("    ©     "+t._s((new Date).getFullYear())+"\n      ")])],1)],1)},ct=[],st={name:"app-footer",data:function(){return{}}},ut=st,lt=n("0e8f"),dt=n("553a"),ft=Object(j["a"])(ut,it,ct,!1,null,null,null),pt=ft.exports;A()(ft,{VCardActions:z["a"],VFlex:lt["a"],VFooter:dt["a"]});var mt={name:"APP__HOME",components:{toolbar:W,"foot-app":pt,snack:at},computed:Object(_["a"])({},Object(E["c"])(["login/TOKEN__isOK"])),mounted:function(){window.app=this,this["login/TOKEN__isOK"]||this["login/logout"]()},methods:Object(_["a"])({},Object(E["b"])(["login/logout"]))},gt=mt,ht=(n("9993"),n("7496")),bt=Object(j["a"])(gt,b,v,!1,null,null,null),vt=bt.exports;A()(bt,{VApp:ht["a"]});var _t=n("0493"),Ot=n.n(_t);n("20c9"),n("d5e8"),n("5363");window.router=p,window.store=l["a"],o["default"].use(h.a,{theme:{primary:"#3f51b5",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"}}),n("ba6a"),o["default"].use(Ot.a),window.md=n("0e54"),window.EventBus=new o["default"],o["default"].config.productionTip=!1,o["default"].config.performance=!0,o["default"].config.devtools=!0,new o["default"]({router:p,store:l["a"],vuetify:c,render:function(t){return t(vt)}}).$mount("#app")},7972:function(t,e,n){"use strict";n.r(e);var o=n("6ee6");n("22d6");e["default"]={state:{questions:[],loading:!1},getters:{questions:function(t,e){return t.questions},loading:function(t,e){return t.loading}},mutations:{toggle:function(t,e){var n=e.prop;t[n]=!t[n]},changeProp:function(t,e){var n=e.prop,o=e.val;t[n]=o},changeObj:function(t,e){var n=e.obj,o=e.prop,r=e.val;t[n][o]=r}},actions:{getQuestions:function(t){t.state;var e=t.commit;t.dispatch;return e("changeProp",{prop:"loading",val:!0}),axios.get("question").then(function(t){return e("changeProp",{prop:"questions",val:t.data.data}),t.data}).catch(function(t){return console.warn("ERR in getQuestions => ",t),!1}).finally(function(t){return e("changeProp",{prop:"loading",val:!1}),t})},getQuestionByCategorySlug:function(t,e){t.state;var n=t.commit;t.dispatch;return n("changeProp",{prop:"loading",val:!0}),axios.get("category/".concat(e,"/questions")).then(function(t){return n("changeProp",{prop:"questions",val:t.data.data}),t.data}).catch(function(t){return console.warn("ERR in getQuestions => ",t),!1}).finally(function(t){return n("changeProp",{prop:"loading",val:!1}),t})},createQuestion:function(t,e){return Object(o["a"])(t),axios.post("question",e)},questionUpdate:function(t,e){return Object(o["a"])(t),axios.patch("question/".concat(e.slug),e)}}}},"7af2":function(t,e,n){"use strict";n.r(e);var o=n("cebc"),r=(n("a481"),n("ac6a"),n("bba4")),a=n.n(r),i=n("017c"),c={};i.keys().forEach(function(t){if("./index.js"!==t){var e=a()(t.replace(/(\.\/|\.js)/g,""));c[e]=Object(o["a"])({namespaced:!0},i(t).default)}}),e["default"]=c},9993:function(t,e,n){"use strict";var o=n("d533"),r=n.n(o);r.a},aab9:function(t,e,n){},b001:function(t,e,n){"use strict";n.r(e);n("22d6");e["default"]={state:{replies:{},loading:!1,slug:null,draft:{}},getters:{GETTER_TOPIC_REPLIES:function(t,e){return t.slug in t.replies?t.replies[t.slug]:[]},GETTER_TOPIC_DRAFT:function(t,e){return t.slug in t.draft?t.draft[t.slug]:""},loading:function(t){return t.loading}},mutations:{appendObj:function(t,e){var n=e.obj,o=e.prop,r=e.val;!(o in t[n])&&(t[n][o]=[]),t[n][o].push(r)},SET_LOADING_ON:function(t){t.loading=!0},SET_LOADING_OFF:function(t){t.loading=!1},SET_TOPIC_REPLIES:function(t,e){var n=e.prop,o=e.val;t.replies[n]=o},APPEND_TOPIC_REPLY:function(t,e){var n=e.slug,o=e.obj;t.replies[n].push(o)},SET_SLUG:function(t,e){t.slug=e},SET_TOPIC_DRAFT:function(t,e){t.draft[t.slug]=e},CLEAR_TOPIC_DRAFT:function(t,e){t.draft[e]=val}},actions:{newReply:function(t,e){var n=t.state,o=t.commit,r=(t.dispatch,e.body),a=n.slug;return axios.post("question/".concat(a,"/reply"),{body:r}).then(function(t){return o("APPEND_TOPIC_REPLY",{slug:a,obj:t.data.Reply}),o("CLEAR_TOPIC_DRAFT",a),!0}).catch(function(t){return console.warn("[STORE] [catch] newReply => ",t),!1})},getReplies:function(t){t.state;var e=t.commit,n=(t.dispatch,t.getters,router.history.current.params.slug);return e("SET_SLUG",n),n?(e("SET_LOADING_ON"),axios.get("question/".concat(n,"/reply")).then(function(t){return e("SET_TOPIC_REPLIES",{prop:n,val:t.data.data}),{stat:!0,msg:t.data}}).catch(function(t){return console.warn("ERR in getReplies => ",t),{stat:!1,msg:t}}).finally(function(t){return e("SET_LOADING_OFF"),t})):{stat:!1,msg:"Неверные параметры для отображения комментариев"}}}}},b461:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("v-text-field",{attrs:{label:"E-mail",type:"email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"===typeof e?e.trim():e)},expression:"form.email"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"===typeof e?e.trim():e)},expression:"form.password"}}),n("v-btn",{attrs:{color:"green",disabled:t.disabled,type:"submit"}},[t.loading?n("v-progress-circular",{attrs:{width:7,color:"purple",indeterminate:""}}):t.disabled?n("v-icon",[t._v("cancel")]):n("v-icon",[t._v("done_outline")]),t._v("\n             \n            Войти\n        ")],1),n("v-btn",{staticClass:"ml-2",attrs:{color:"blue"},on:{click:t.toRegHandler}},[n("v-icon",[t._v("assignment")]),t._v(" Зарегистрироваться")],1)],1)],1)},r=[],a=(n("96cf"),n("3b8d")),i=n("cebc"),c=n("2f62"),s={data:function(){return{form:{email:null,password:null},loading:!1}},mounted:function(){this["login/loggedIn"]&&this.$router.push({name:"forum"})},computed:Object(i["a"])({},Object(c["c"])(["login/loggedIn"]),{modalMode:function(){return this.$store.state.toolbar.modalMode},disabled:function(){return!this.form.email||!this.form.password}}),methods:Object(i["a"])({},Object(c["d"])(["toolbar/SET_MODAL_MODE_OFF"]),Object(c["b"])(["login/login"]),{handleSubmit:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this["login/login"](this.form);case 3:e=t.sent,e?(n=this.modalMode,n||this.$router.push({name:"forum"}),this["toolbar/SET_MODAL_MODE_OFF"](),snack("Вы успешно вошли","success")):snack("Invalid password","error"),this.loading=!1;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toRegHandler:function(){this.modalMode||this.$router.push({name:"signup"}),this.$emit("toRegMode")}})},u=s,l=n("2877"),d=n("6544"),f=n.n(d),p=n("8336"),m=n("a523"),g=n("4bd4"),h=n("132d"),b=n("490a"),v=n("8654"),_=Object(l["a"])(u,o,r,!1,null,null,null);e["default"]=_.exports;f()(_,{VBtn:p["a"],VContainer:m["a"],VForm:g["a"],VIcon:h["a"],VProgressCircular:b["a"],VTextField:v["a"]})},ba6a:function(t,e,n){"use strict";n.r(e);var o=n("5638"),r=n("bc3a");window.axios=r.create({baseURL:"http://127.0.0.1:8000/api",headers:{common:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer ".concat(store.state.login.token)}}}),axios.interceptors.request.use(function(t){var e=store.token;return e?t.headers.Authorization="Bearer ".concat(store.state.login.token):"Authorization"in t.headers&&delete t.headers.Authorization,t},function(t){return Promise.reject(t)}),window.Pusher=n("782e"),window.Echo=new o["a"]({broadcaster:"pusher",key:"7b08572e181a32553e9a",cluster:"eu",encrypted:!0,auth:{headers:{Authorization:store.state.login.token}}}),Pusher.logToConsole=!0},c668:function(t,e,n){"use strict";n.r(e);n("6762"),n("2fdb"),n("96cf");var o=n("3b8d"),r=(n("7f7f"),n("673e"),n("cebc"));n("28a5"),n("a481");e["default"]={state:{token:null,tokenValidation:{iss:"http://localhost/api/auth/login"},user:{role:null,name:null},loading:!1},getters:{TOKEN__isValid:function(t,e){var n=function(t){try{return btoa(atob(t)).replace(/=/g,"")==t}catch(e){return!1}},o=function(t){return!!n(t)&&JSON.parse(atob(t))},r=t.token,a="string"==typeof r&&o(r.split(".")[1]);return!!a},TOKEN__isExpired:function(t,e){if(e.TOKEN__parse)return new Date>1e3*e.TOKEN__parse.exp},TOKEN__parse:function(t,e){if(e.TOKEN__isValid){var n=t.token.split(".");return Object(r["a"])({},JSON.parse(atob(n[0])),JSON.parse(atob(n[1])))}},TOKEN__isOK:function(t,e){return!e.TOKEN__isExpired&&e.TOKEN__isValid},id:function(t,e){if(e.TOKEN__parse)return e.TOKEN__parse.sub},isAdmin:function(t,e){return e.TOKEN__isOK},isUser:function(t,e){return e.TOKEN__isOK},username:function(t,e){return t.user.name},loggedIn:function(t,e){return e.isUser||e.isAdmin}},mutations:{toggle:function(t,e){var n=e.prop;t[n]=!t[n]},changeProp:function(t,e){var n=e.prop,o=e.val;t[n]=o},changeObj:function(t,e){var n=e.obj,o=e.prop,r=e.val;t[n][o]=r},SET_LOADING_ON:function(t){t.loading=!0},SET_LOADING_OFF:function(t){t.loading=!1},SET_TOKEN:function(t,e){t.token=e,t.user.role="admin"},DROP_TOKEN:function(t){t.token=null,t.user.role=null}},actions:{login:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e,n){var o,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.state,o=e.commit,r=e.dispatch,o("SET_LOADING_ON"),t.abrupt("return",axios.post("auth/login",n).then(function(t){return o("SET_TOKEN",t.data.access_token),!0}).catch(function(){return!1}).finally(function(){o("SET_LOADING_OFF"),r("checkPermitionsOnCurrentPath")}));case 3:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),register:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e,n){var o,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.commit,r=e.dispatch,o("SET_LOADING_ON"),t.abrupt("return",axios.post("auth/signup",n).then(function(t){return o("SET_TOKEN",t.data.access_token),!0}).catch(function(t){return t.response&&t.response.data&&t.response.data.errors}).finally(function(){o("SET_LOADING_OFF"),r("checkPermitionsOnCurrentPath")}));case 3:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),logout:function(t){var e=t.commit,n=t.dispatch;e("DROP_TOKEN"),n("checkPermitionsOnCurrentPath")},checkPermitionsOnCurrentPath:function(t){t.state;var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:router.history.current.path,n=store.state.login.user.role,o=store.getters["toolbar/items"].filter(function(t){return t["to"]==e});return!o.length||(o[0].roles.includes(n)||o[0].roles.includes("*")?(console.warn("есть права"),!0):(console.warn("нет прав!!"),router.push({name:"forum"}),!1))}}}},d533:function(t,e,n){},eb02:function(t,e,n){"use strict";var o=n("2b0e"),r=n("2f62"),a=n("7af2"),i=n("bfa9"),c=new i["a"]({storage:window.localStorage});o["default"].use(r["a"]),window.store=new r["a"].Store({plugins:[c.plugin],modules:a["default"]}),e["a"]=store},ec85:function(t,e,n){"use strict";n.r(e);var o=n("6ee6"),r=(n("96cf"),n("3b8d"));n("22d6");e["default"]={state:{categories:[],loading:!1},getters:{categories:function(t,e,n,o){t.state,t.getters;return n.category.categories},loading:function(t,e,n,o){t.state,t.getters;return n.category.loading}},mutations:{changeProp:function(t,e){var n=e.prop,o=e.val;t[n]=o},SET_LOADING_ON:function(t){t.loading=!0},SET_LOADING_OFF:function(t){t.loading=!1}},actions:{getCategories:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("SET_LOADING_ON"),t.abrupt("return",axios.get("category").then(function(t){return n("changeProp",{prop:"categories",val:t.data.data})}).catch(function(t){console.warn("ERR in getCategories => ",t)}).finally(function(t){return n("SET_LOADING_OFF")}));case 3:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),createCategory:function(t,e){var n=t.dispatch;return axios.post("category",e).then(function(){return n("getCategories"),!0})},deleteCategory:function(t,e){return Object(o["a"])(t),axios.delete("category/".concat(e))},updateCategory:function(t,e){t.rootState;var n=e.slug,o=e.form;return axios.patch("category/".concat(n),o)}}}},fccd:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[n("v-text-field",{attrs:{label:"Имя",type:"text",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.errors.name?n("span",{staticClass:"red--text"},[t._v(t._s(t.errors.name[0]))]):t._e(),n("v-text-field",{attrs:{label:"E-mail",type:"email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t.errors.email?n("span",{staticClass:"red--text"}):t._e(),t.errors.email?n("span",{staticClass:"red--text"},[t._v(t._s(t.errors.email[0]))]):t._e(),n("v-text-field",{attrs:{label:"Пароль",type:"password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t.errors.password?n("span",{staticClass:"red--text"},[t._v(t._s(t.errors.password[0]))]):t._e(),n("v-text-field",{attrs:{label:"Подтверждение пароля",type:"password",required:""},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}}),n("v-btn",{attrs:{disabled:!t.isFormValid,color:"green",type:"submit"}},[n("v-icon",[t._v("done_outline")]),t._v("\n             Зарегистрироваться\n        ")],1),n("v-btn",{staticClass:"ml-2",attrs:{color:"blue"},on:{click:t.toLoginHandler}},[n("v-icon",[t._v("person")]),t._v("Войти")],1)],1)],1)},r=[],a=(n("96cf"),n("3b8d")),i=(n("7f7f"),n("cebc")),c=n("2f62"),s={name:"sign-up",data:function(){return{form:{name:null,email:null,password:null,password_confirmation:null},errors:{}}},mounted:function(){this["login/loggedIn"]&&this.goHome()},computed:Object(i["a"])({},Object(c["e"])(["toolbar/modalMode"]),Object(c["c"])(["login/loggedIn"]),{modalMode:function(){return this.$store.state.toolbar.modalMode},isFormValid:function(){var t=this.form.name,e=this.form.email,n=this.form.password,o=this.form.password_confirmation;return t&&e&&n&&o}}),destroyed:function(){this.$emit("toLoginMode")},methods:Object(i["a"])({},Object(c["d"])(["toolbar/SET_MODAL_MODE_OFF"]),Object(c["b"])(["login/register"]),{goHome:function(){this.$router.push("/forum")},signup:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n,o,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.form.password,n=this.form.password_confirmation,e==n){t.next=4;break}return t.abrupt("return",snack("Пароли не совпадают!","error"));case 4:return t.next=6,this["login/register"](this.form);case 6:o=t.sent,1==o?(r=this.modalMode,r||this.goHome(),this["toolbar/SET_MODAL_MODE_OFF"]()):o?(this.errors=o,snack("Возникли ошибки во время регистрации","error")):snack("Возникла сетевая ошибка во время регистрации","error");case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toLoginHandler:function(){this.modalMode||this.$router.push({name:"login"}),this.$emit("toLoginMode")}})},u=s,l=n("2877"),d=n("6544"),f=n.n(d),p=n("8336"),m=n("a523"),g=n("4bd4"),h=n("132d"),b=n("8654"),v=Object(l["a"])(u,o,r,!1,null,null,null);e["default"]=v.exports;f()(v,{VBtn:p["a"],VContainer:m["a"],VForm:g["a"],VIcon:h["a"],VTextField:b["a"]})},fcf7:function(t,e,n){"use strict";n.r(e),e["default"]={state:{modalMode:!1},mutations:{SET_MODAL_MODE_ON:function(t){t.modalMode=!0},SET_MODAL_MODE_OFF:function(t){t.modalMode=!1}},getters:{items:function(t,e,n,o){t.state,t.getters;var r=o["login/isAdmin"],a=o["login/isUser"],i=r||a;return[{title:"Форум",to:"/forum",icon:"question_answer",show:!0,roles:["*"]},{title:"Создать тему",to:"/ask",icon:"plus_one",show:i,roles:["admin","user"]},{title:"Редактор категорий",to:"/edit-categories",icon:"bookmarks",show:i,roles:["admin"]},{title:"Войти",icon:"person",show:!i,roles:["guest"]},{title:"Выйти",icon:"exit_to_app",show:i,roles:["admin","user"]}]}}}},fe80:function(t,e,n){"use strict";n.r(e);n("22d6"),n("eb02");e["default"]={state:{notifications:{}},getters:{read:function(t,e){var n=t.notifications;return n&&n&&n.read},unread:function(t,e){var n=t.notifications;return n&&n&&n.unread}},mutations:{toggle:function(t,e){var n=e.prop;t[n]=!t[n]},changeProp:function(t,e){var n=e.prop,o=e.val;t[n]=o},changeObj:function(t,e){var n=e.obj,o=e.prop,r=e.val;t[n][o]=r},spliceObj:function(t,e){var n=e.notification;t.notifications.unread.splice(n,1)}},actions:{getNotifications:function(t,e){t.state;var n=t.commit;t.dispatch;return axios.post("notifications").then(function(t){return n("changeProp",{prop:"notifications",val:{read:t.data.read,unread:t.data.unread}}),!0}).catch(function(t){return console.warn("[STORE][getNotifications] err =>",t),!1})},markAsRead:function(t,e){t.state;var n=t.commit;t.dispatch;return axios.post("markAsRead",{id:e.id}).then(function(t){return n("changeObj",{obj:"notifications",prop:"read",val:e}),n("spliceObj",{notification:e}),!0}).catch(function(t){console.warn("[STORE][markAsRead] err =>",t)})}}}}});
//# sourceMappingURL=app-legacy.0bdd84b2.js.map